DSEG SEGMENT
SOUNDSCR DB "UFJGVJHGVJGFYUTFUGDXCV"
LEN EQU $-SOUNDSCR
DSEG ENDS

STACK1 SEGMENT STACK
DW 1024 DUP(?)
STACK1 ENDS

CSEG SEGMENT
ASSUME CS:CSEG,DS:DSEG,SS:STACK1
START:
MOV AX,DSEG
MOV DS,AX
MOV AX,STACK1
MOV SS,AX
MOV CX,30000
;
LEA SI,SOUNDSCR
MOV DI,0
MOV BL,[SI]
MOV BH,1
;
AGAIN:
IN AL,61H
AND AL,11111100B
CALL SETSCR
OR AL,DL
CALL PRINTDL
OUT 61H,AL
CALL DELAY
LOOP AGAIN
EXIT:
MOV AH,4CH
INT 21H

PRINTDL PROC
PUSH DX
PUSH AX
SHR DL,1
ADD DL,30H
MOV AH,02H
INT 21H
POP AX
POP DX
RET
PRINTDL ENDP

SETSCR PROC
PUSH AX
SHR BX,1
MOV DL,0
ADC DL,0
SHL DL,1

CMP BX,1
JE CHDI
JMP NEXT1
  CHDI:
INC DI
CMP DI,LEN
JAE REDI
  NEXT2:
MOV BX,DI
MOV AL,[SI+BX]
MOV BL,AL
MOV BH,1
  JMP NEXT1
  REDI:
MOV DI,0
  JMP NEXT2
  NEXT1:
POP AX
RET 
SETSCR ENDP

DELAY PROC
PUSH CX
PUSH DX
MOV CX,0FFH
DELAY2:
MOV DX,0AFFH
DELAY1:
SUB DX,0001H
JNZ DELAY1
LOOP DELAY2
POP DX
POP CX
RET
DELAY ENDP

CSEG ENDS
END START
