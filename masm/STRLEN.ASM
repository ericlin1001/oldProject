PUSHALL MACRO
PUSH AX
PUSH BX
PUSH CX
PUSH DX
PUSH SI
PUSH DI
ENDM

POPALL MACRO
POP DI
POP SI
POP DX
POP CX
POP BX
POP AX
ENDM

DSEG SEGMENT
STR DB "1234","$"
MESS1 DB "THE LEN OF ","$"
MESS2 DB " IS: ","$"
DSEG ENDS
EXTRA1 SEGMENT

EXTRA1 ENDS
CSEG SEGMENT
ASSUME CS:CSEG,DS:DSEG,ES:EXTRA1
START:
MOV AX,DSEG
MOV DS,AX
MOV AX,EXTRA1
MOV ES,AX
LEA DX,MESS1
MOV AH,09H
INT 21H
LEA DX,STR
MOV AH,09H
INT 21H
LEA DX,MESS2
MOV AH,09H
INT 21H
LEA DX,STR
CALL STRLEN
ADD AL,30H
MOV DL,AL
MOV AH,02H
INT 21H


EXIT:
MOV AH,4CH
INT 21H

STRLEN PROC
PUSHALL
MOV BX,DX
MOV SI,0
LOOP1:
MOV AL,[BX+SI]
INC SI
CMP AL,"$"
JNE LOOP1
SUB SI,1
MOV BP,SI
POPALL
MOV AX,BP
RET
STRLEN ENDP
CSEG ENDS
END START
